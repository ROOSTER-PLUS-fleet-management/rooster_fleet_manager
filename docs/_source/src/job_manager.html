

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>job_manager ROS node &mdash; rooster_fleet_manager 0.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'0.0.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="mex_sentinel ROS node" href="mex_sentinel.html" />
    <link rel="prev" title="ROS nodes and source code API" href="../SrcLandingPage.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> rooster_fleet_manager
          

          
            
            <img src="../../_static/RoosterIcon v2.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Stuff to know:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Overview.html">Fleet Manager Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rooster_ecosystem.html">Fleet Simulation Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../InstallInstructions.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LicenseInformation.html">License Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LaunchFilesLandingPage.html">Launch Files</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../SrcLandingPage.html">ROS nodes and source code API</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">job_manager ROS node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-job_manager">job_manager script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mex_sentinel.html">mex_sentinel ROS node</a></li>
<li class="toctree-l2"><a class="reference internal" href="fleet_manager_front.html">fleet_manager_front module</a></li>
<li class="toctree-l2"><a class="reference internal" href="marker_array.html">marker_array ROS node</a></li>
<li class="toctree-l2"><a class="reference internal" href="JobManager.html">JobManager package</a></li>
<li class="toctree-l2"><a class="reference internal" href="ui.html">ui package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../MsgLandingPage.html">ROS messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SrvLandingPage.html">ROS Services</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">rooster_fleet_manager</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../SrcLandingPage.html">ROS nodes and source code API</a> &raquo;</li>
        
      <li>job_manager ROS node</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/_source/src/job_manager.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="job-manager-ros-node">
<h1>job_manager ROS node<a class="headerlink" href="#job-manager-ros-node" title="Permalink to this headline">¶</a></h1>
<p>The Job Manager takes in orders from the Fleet Manager Front and appends them to a order list.</p>
<p>Every second the Job Manager then checks this Order List and builds Jobs with Tasks from the orders, sorting them based on priority and placing them in the Pending Job list.</p>
<p>Every few seconds the Job Manager will check this Pending Job list and pick the first Pending Job (highest priority first, then within priotity First In First Out). It then allocates this Job to an available (and if local is applicable; closest) MEx, passing the Job on to the Active Jobs list.</p>
<p>Active Jobs keep track of their own Tasks and updates the Mobile Executor (MEx) on the MEx Sentinel. Upon Job completion (succes, cancel, abort) the Job is removed from the Active Jobs list and the MEx is freed and set to STANDBY in the MEx Sentinel.</p>
<p>The Job Manager provides callable services locally for</p>
<ul class="simple">
<li>placing Orders (<a class="reference internal" href="../SrvLandingPage.html#placeorder-srv-label"><span class="std std-ref">PlaceOrder srv</span></a>)</li>
<li>retrieving the Pending Jobs list (<a class="reference internal" href="../SrvLandingPage.html#getpendingjobs-srv-label"><span class="std std-ref">GetPendingJobs srv</span></a>)</li>
<li>retrieving the Active Jobs list (<a class="reference internal" href="../SrvLandingPage.html#getactivejobs-srv-label"><span class="std std-ref">GetActiveJobs srv</span></a>)</li>
<li>retrieving detailed Job Information (<a class="reference internal" href="../SrvLandingPage.html#getjobinfo-srv-label"><span class="std std-ref">GetJobInfo srv</span></a>)</li>
</ul>
<div class="section" id="module-job_manager">
<span id="job-manager-script"></span><h2>job_manager script<a class="headerlink" href="#module-job_manager" title="Permalink to this headline">¶</a></h2>
<p>Job Manager:</p>
<p>The Job Manager ROS Node acts as the order processor and manager of (active and pending) Jobs.
It takes in Orders from the Fleet Manager Front (GUI) and appends these on an order list. 
It processes orders into Jobs with Tasks and a priority value, 
starting with CRITICAL followed by HIGH, MEDIUM and finally LOW. 
Jobs with equal priority are sorted based on First In First Out.
It queries the MEx Sentinel for available Mobile Executors (MEx) and allocates and refines Jobs.
Active Jobs keep track of their own progress and trigger callbacks upon finalisation.</p>
<p>Note: See also the documentation below for a more detailed description.</p>
<dl class="function">
<dt id="job_manager.get_active_jobs_service_cb">
<code class="descclassname">job_manager.</code><code class="descname">get_active_jobs_service_cb</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/job_manager.html#get_active_jobs_service_cb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#job_manager.get_active_jobs_service_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>GetActiveJobs service callback function.
Takes in a empty request.
Returns a response with a list of all Active Jobs and all basic information.</p>
</dd></dl>

<dl class="function">
<dt id="job_manager.get_job_info_service_cb">
<code class="descclassname">job_manager.</code><code class="descname">get_job_info_service_cb</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/job_manager.html#get_job_info_service_cb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#job_manager.get_job_info_service_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>GetJobInfo service callback function.
Takes in a request with a Job ID.
Returns a response with all information on the Job 
matching the call ID, including a list of the Job’s Tasks.</p>
</dd></dl>

<dl class="function">
<dt id="job_manager.get_pending_jobs_service_cb">
<code class="descclassname">job_manager.</code><code class="descname">get_pending_jobs_service_cb</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/job_manager.html#get_pending_jobs_service_cb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#job_manager.get_pending_jobs_service_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>GetPendingJobs service callback function.
Takes in a empty request.
Returns a response with a list of all Pending Jobs and some basic information.</p>
</dd></dl>

<dl class="function">
<dt id="job_manager.job_allocator_timer_cb">
<code class="descclassname">job_manager.</code><code class="descname">job_allocator_timer_cb</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/job_manager.html#job_allocator_timer_cb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#job_manager.job_allocator_timer_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>Job allocator timer callback function. Calls job allocator function.</p>
</dd></dl>

<dl class="function">
<dt id="job_manager.job_completion_cb">
<code class="descclassname">job_manager.</code><code class="descname">job_completion_cb</code><span class="sig-paren">(</span><em>job_id</em>, <em>mex_id</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/job_manager.html#job_completion_cb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#job_manager.job_completion_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>Job completion callback function, gets called when a 
Jobs is finished (succesful, cancel, error or abort).
It is attached to a Job in the job_builder function.</p>
</dd></dl>

<dl class="function">
<dt id="job_manager.order_list_timer_cb">
<code class="descclassname">job_manager.</code><code class="descname">order_list_timer_cb</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/job_manager.html#order_list_timer_cb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#job_manager.order_list_timer_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>Order list timer callback function. Calls process_order_list function.</p>
</dd></dl>

<dl class="function">
<dt id="job_manager.order_service_cb">
<code class="descclassname">job_manager.</code><code class="descname">order_service_cb</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/job_manager.html#order_service_cb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#job_manager.order_service_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>PlaceOrder service callback function.
Takes in a PlaceOrderRequest request with a order keyword, priority and arguments.
Processes these and adds the processed order in list form to the order_list.
Returns a PlaceOrderResponse response with information on if the call failed and why.</p>
</dd></dl>

<dl class="function">
<dt id="job_manager.process_order_list">
<code class="descclassname">job_manager.</code><code class="descname">process_order_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/job_manager.html#process_order_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#job_manager.process_order_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Build jobs from all orders in the order_list by calling 
the job_builder function, then clear the order_list.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mex_sentinel.html" class="btn btn-neutral float-right" title="mex_sentinel ROS node" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../SrcLandingPage.html" class="btn btn-neutral float-left" title="ROS nodes and source code API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, TU Delft and stakeholders of &#39;Collaborating and coupled AGV swarms with extended environment recognition&#39; project funded by EIT Manufacturing.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>